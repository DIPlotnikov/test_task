# test_task
## Описани программы  
Данная программа используется для определения переданных форм  
на основе шаблонов, имеющихся в БД.  

### Образец шаблона:  
{  
"name": "CommentForm",   
"user_email": "email",  
"user_phone": "phone_number",  
"publication_date": "date", 
"text_field": "text"  
}  
## Принимаемые данные
POST запрос, где ключами является поля формы,  
а значениями - введенные пользователями данные.  
url - http://localhost:5000/get_form
Формат запроса:
f_name1=value1&f_name2=value2

### Типы данных:

"email" - запись вида ivanovivan@yandex.ru

"phone_number" - принимает номера, начинающиеся с +7 или 8 и имеющие кроме
того 10 цифр. Знаки разделения (дефисы, пробелы, скобки) допускаются. 
(Предполагается ручной ввод, поэтому используется форматирование данных)

"date" - тип данных, принимающий дату строго в формает DD.MM.YYYY или YYYY-MM-DD. 
Иные разделители или порядок недопустимы. 
(Предполагается использование веб формы со строгой передачей данных на сервер)

"text" - любой текст, не подходящий под критерии типов выше.

Иные переданные данные будут отмечены, как неподдерживаемые.

## Возвращаемые данные
Програма возвращает имя подходящего шаблона (строку) - указывается в поле 'name'.
Подходящим считаеся шаблон, все поля и типы данных значений которого
совпали с полями и типами данных передданных в запросе.
Допустим случай, когда переданная форма подходит под несколько шаблонов.
В зависимоти от состояния параметра return_all_matching_templates из
settings.py будут возвращены имена всех шаблонов (True) разделенных пробелами или только
первого подошедшего (False).

Пример 1:
"CommentForm"
Пример 2:
"CommentForm" "RegForm"

В случае, если ни один шаблон не подходит, то программа возвращает
переданную форму, где вместо пользовательских значений будут указаны типы этих значений.

Пример: 
{
"field_name_1": "email",
"field_name_2": "phone"
}

# Установка
1. Запустите _install.bat в папке с программой. Он установит виртуальное окружение 
зависимости программы.
Дождитесь, пока скрипт закончит работу (окно закроется).

2. Запустите _start_application.bat
На экране вы увидите, что сервер запущен.

3. Запустите _start_tests.bat
Скрипт создаст тестовую базу данных и проведет ряд тестов.
Если тесты прошли успешно, то на экране будет надпись 'OK'.

Далее можно пользоваться программой на своё усмотрение.

В случае, обнаружения ошибки попробуйте ввести команды bat файлов 
через консоль (для опытных пользователей). Если это не помогло и вы не знаете, что делать
обратитесь в техподдержку ПО на почту d.i.plotnikov@yandex.ru

# Зависимости
python 3.10
Flask 2.0.2
requests 2.31.0
tinydb 4.8.0
Werkzeug 2.3.7
